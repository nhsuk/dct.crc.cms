Scenarios to be supported:
- Copying (example upstream staging to integration, downstream staging to live)
  - Database synced except:
    - Django (Wagtail) Users table
    - Site domain name from Sites table
  - Content container(s) duplicated
  - Index container to be rebuilt after copy
- Cloning (example live to DR)
  - Database fully synced
  - Content container(s) duplicated
  - Index container to be rebuilt after copy

Issues to be considered:
  - upstream database may have newer schema than downstream
    - detecting this?
    - downstream to upstream: need to migrate downstream database before syncing tables
    - upstream to downstream: need to downgrade downstream content before syncing tables - not supported
  - review environments to have separate databases?
    - maybe as SQLite local file - have to use SQL copies not Postgres tools - but no new server required
    - servers have private PostgreSQL instance with its own local file store or maybe a persistent file store in a storage accout
  - would make sense for all review environments to have same Users table, maybe copied from integration?

Existing support:
- sync-db command in fab.sh
- pipeline

crc-v3-review-cv-920.nhswebsite-dev.nhs.uk
https://github.com/nhsuk/dct-campaign-resource-centre

git checkout
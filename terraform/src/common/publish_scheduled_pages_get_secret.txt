resource "azurerm_logic_app_action_custom" "publish_scheduled_pages_get_secret" {
  name         = "Get publishing scheduled pages secret"
  logic_app_id = azurerm_logic_app_workflow.publish_scheduled_pages_workflow.id
  body = <<BODY
{
    "description": "Get pubToken to authorize request to publish scheduled pages",
    "inputs": {
        "host": {
            "connection": {
                "name": "@parameters('$connections')['keyvault']['connectionId']"
            }
        },
        "method": "get",
        "path": "/secrets/@{encodeURIComponent('pubToken')}/value"
    },
    "runAfter": {},
    "type": "ApiConnection"
}
BODY

}
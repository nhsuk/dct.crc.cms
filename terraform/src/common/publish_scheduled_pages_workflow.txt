resource "azurerm_logic_app_workflow" "publish_scheduled_pages_workflow" {
  name                = replace(data.azurerm_resource_group.rg.name, "-rg-", "-scheduler-la-")
  location            = data.azurerm_resource_group.rg.location
  resource_group_name = data.azurerm_resource_group.rg.name
  parameters          = {
    "$connections": {
      "value": {
        "keyvault": {
          "connectionId": azapi_resource.keyvault_con.id,
          "connectionName": "keyvault",
          "connectionProperties": {
            "authentication": {
              "type": "ManagedServiceIdentity"
            }
          },
          "id": local.api_connection_id
        }
      }
    }
  }
}
{% extends 'wagtailadmin/base.html' %}
{% load wagtailadmin_tags static %}

{% block titletag %}
  Tag Management Results
{% endblock %}

{% block extra_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'tag_management/css/bulk_manage_tags.css' %}" />
{% endblock %}

{% block content %}
  {% include 'wagtailadmin/shared/header.html' with title='Tag Management Results' icon='success' %}

  <div class="nice-padding">
        {% if num_failed == 0 and num_modified > 0 %}
      <div class="messages">
        <ul>
          <li class="success">
            {% icon name="success" classname="messages-icon" %}
            Successfully updated {{ num_modified }} page{{ num_modified|pluralize }}!
          </li>
        </ul>
      </div>
    {% elif num_failed > 0 and num_modified > 0 %}
      <div class="messages">
        <ul>
          <li class="warning">
            {% icon name="warning" classname="messages-icon" %}
            Updated {{ num_modified }} page{{ num_modified|pluralize }}, but {{ num_failed }} page{{ num_failed|pluralize }} failed to update.
          </li>
        </ul>
      </div>
    {% elif num_failed > 0 %}
      <div class="messages">
        <ul>
          <li class="error">
            {% icon name="warning" classname="messages-icon" %}
            Failed to update {{ num_failed }} page{{ num_failed|pluralize }}.
          </li>
        </ul>
      </div>
    {% endif %}

    <h2>Updated Pages</h2>
    {% if items %}
      {% include 'tag_management/includes/changes_table.html' with show_results=True %}
    {% else %}
      <p>No changes were made.</p>
    {% endif %}

    <div class="button-wrapper">
      <a href="{{ next_url }}" class="button">Back to Pages</a>
    </div>
  </div>
{% endblock %}
